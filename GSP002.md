# **Getting Started with Cloud Shell and gcloud # GSP002**

## **Variables Preparation**
Command to create variables need for this lab

    export REGION=<your region>
    export ZONE=<your zone>
    export PROJECT_ID=<your project id>
    export EXTERNAL_IP=<your vm external ip>

Command to select your project if it was deselected

    gcloud config set project $PROJECT_ID

<br>

___
## **Task 1: Configure your environment**
Create VM Instance

    gcloud compute instances create gcelab2 --machine-type e2-medium --zone $ZONE

*After VM creation, export the external ip*

<br>

___
## **Task 2: Filtering command line output**
Nothing to do here...
<br>

___
## **Task 3: Connecting to your VM instance**
Connect to your VM with SSH

    gcloud compute ssh gcelab2 --zone $ZONE
    Y
*Press enter x2*

Install nginx

    sudo apt-get update
    sudo apt install -y nginx
    exit
___
### **Extra for checking website**
    curl http://$(gcloud compute instances list --filter=name:gcelab2 --format='value(EXTERNAL_IP)')

*Press CTRL+C to cancel* **OR** *Access through your browser with your vm external ip.*
<br>

___
## **Task 4: Updating the Firewall**
Add a tag to the virtual machine

    gcloud compute instances add-tags gcelab2 --tags http-server,https-server --zone=$ZONE

Update the firewall rule

    gcloud compute firewall-rules create default-allow-http --direction=INGRESS --priority=1000 --network=default --action=ALLOW --rules=tcp:80 --source-ranges=0.0.0.0/0 --target-tags=http-server

Check website

    curl http://$(gcloud compute instances list --filter=name:gcelab2 --format='value(EXTERNAL_IP)')

*Press CTRL+C to cancel* **OR** *Access through your browser with your vm external ip.*
___
### **Extra for changing website**
Connect to your VM with SSH

    gcloud compute ssh gcelab2 --zone $ZONE

Connect with Super User

    sudo su

Install wget + unzip and install the new webpage

    apt-get install -y wget unzip
    cd /var/www/html
    rm index.nginx-debian.html
    wget https://github.com/geo-wurth/SenaiMogiCloud/archive/refs/heads/main.zip
    unzip main.zip
    rm main.zip
    mv SenaiMogiCloud-main/* ./
    rm -R SenaiMogiCloud-main
    exit
    exit

- [x] Check External IP link

- [x] Check External IP link

<br>

___
## **Task 5: Viewing the system logs**
Nothing to do here...
<br>

___
## **Task 6: Test your understanding**
    Three basic ways to interact with Google Cloud services and resources are:
    [x] Command-line interface
    [ ] GStreamer
    [x] Client libraries
    [ ] GLib
    [x] Cloud Console